{
    "statusCode": 200,
    "body": "<!doctype html> <html> <head> <meta charset=\"utf-8\"> <title>HOIS2 ID-Login</title> </head> <body> <div id=\"message\"></div> <script>var BASE_URL = 'hois_back';\nvar JWT_TOKEN_HEADER = 'Authorization';\nfunction showError(msg) {\n  document.getElementById(\"message\").innerHTML = msg;\n}\nfunction clearError() {\n  document.getElementById(\"message\").innerHTML = '';\n}\nfunction loginFailed() {\n  console.error('Login failed!');\n  showError('Sisselogimine eba√µnnestus!');\n}\nfunction loginSuccess() {\n  window.location = getSearchParam('redirect');\n}\nfunction doHttpGet(path, header, resolve, reject) {\n  var request = new XMLHttpRequest();\n  request.open(\"GET\", BASE_URL + path);\n  if (header) {\n    request.setRequestHeader(header.name, header.value);\n  }\n  request.onreadystatechange = function () {\n    if(request.readyState === XMLHttpRequest.DONE) {\n      if(request.status === 200) {\n        resolve(JSON.parse(request.responseText));\n      } else {\n        reject();\n      }\n    }\n  };\n  request.send();\n}\nfunction parse_query_string(query) {\n  var vars = query.split(\"&\");\n  var query_string = {};\n  for (var i = 0; i < vars.length; i++) {\n    var pair = vars[i].split(\"=\");\n    // If first entry with this name\n    if (typeof query_string[pair[0]] === \"undefined\") {\n      query_string[pair[0]] = decodeURIComponent(pair[1]);\n      // If second entry with this name\n    } else if (typeof query_string[pair[0]] === \"string\") {\n      var arr = [query_string[pair[0]], decodeURIComponent(pair[1])];\n      query_string[pair[0]] = arr;\n      // If third or later entry with this name\n    } else {\n      query_string[pair[0]].push(decodeURIComponent(pair[1]));\n    }\n  }\n  return query_string;\n}\nfunction getSearchParam(name) {\n  // in future should be: return new URL(window.location.href).searchParams.get(name);\n  return parse_query_string(window.location.search.substring(1))[name];\n}\nvar jwt_token = getSearchParam('token');\ndoHttpGet('/user', {name: JWT_TOKEN_HEADER, value: 'Bearer ' + jwt_token}, loginSuccess, loginFailed);</script> </body> </html>",
    "headers": {
        "date": "Thu, 04 May 2023 22:43:39 GMT",
        "content-type": "text/html",
        "last-modified": "Mon, 17 Apr 2023 07:38:51 GMT",
        "connection": "close",
        "etag": "\"643cf78b-803\"",
        "accept-ranges": "bytes",
        "vary": "Accept-Encoding",
        "transfer-encoding": "chunked"
    },
    "request": {
        "uri": {
            "protocol": "https:",
            "slashes": true,
            "auth": null,
            "host": "tahvel.edu.ee",
            "port": 443,
            "hostname": "tahvel.edu.ee",
            "hash": "#/",
            "search": "?token=&redirect=https://tahvel.edu.ee/",
            "query": "token=&redirect=https://tahvel.edu.ee/",
            "pathname": "/idlogin.html",
            "path": "/idlogin.html?token=&redirect=https://tahvel.edu.ee/",
            "href": "https://tahvel.edu.ee/idlogin.html?token=&redirect=https://tahvel.edu.ee/#/"
        },
        "method": "GET",
        "headers": {
            "User-Agent": "Mozilla/5.0",
            "Cookie": "remember_user_token=eyJfcmFpbHMiOnsibWVzc2FnZSI6IlcxczNOVEV5TTEwc0lqWm9MWE0zWDJ0YWExbE1lWFpRWTFoZlNtSlZJaXdpTVRZNE16SXpOVE01T1M0MU5UZzRNVGs0SWwwPSIsImV4cCI6IjIwMjMtMTEtMDRUMjI6MjM6MTkuNTU4WiIsInB1ciI6ImNvb2tpZS5yZW1lbWJlcl91c2VyX3Rva2VuIn19--a781e2ed5119790c70deeadfe5ee3f7e461f7dde",
            "referer": "https://tahvel.edu.ee/haridcallback?code=8d26cbbaca4d8750bb95f67e173614a87a6ec52d8e7b7b6bde0d6f8db6ed58d8&state=41f3603e-b0e6-4772-be8b-25addfb45514"
        }
    }
}
